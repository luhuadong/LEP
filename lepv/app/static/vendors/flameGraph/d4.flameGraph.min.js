!function(){"use strict";function t(){function t(t){var n=document.getElementById("details");n&&(n.innerHTML=t)}function n(t){return t.data.name}function e(t){var n=0,e=1,r=0,a=10,i=6;if(t){for(var u=0;u<t.length&&!(u>i);u++)n+=e*(t.charCodeAt(u)%a),r+=e*(a-1),e*=.7;r>0&&(n/=r)}return n}function r(t){var n=0;if(t){var r=t.split("`");r.length>1&&(t=r[r.length-1]),t=t.split("(")[0],n=e(t)}var a=200+Math.round(55*n),i=0+Math.round(230*(1-n)),u=0+Math.round(55*(1-n));return"rgb("+a+","+i+","+u+")"}function a(t){t.data.original||(t.data.original=t.data.value),t.data.value=0,t.children&&t.children.forEach(a)}function i(t){t.data.fade=!1,t.data.original&&(t.data.value=t.data.original),t.children&&t.children.forEach(i)}function u(t){var n=[];if(t.parent){var e=t.parent.children.indexOf(t);n=t.parent.children.slice(0),n.splice(e,1)}return n}function c(t){var n=u(t);n.forEach(function(t){a(t)}),t.parent&&c(t.parent)}function o(t){t.parent&&(t.parent.data.fade=!0,o(t.parent))}function l(t){k.hide(t),c(t),i(t),o(t),s(),"function"==typeof T&&T(t)}function d(t,n){function e(t){var n=t.data.name;t.children&&t.children.forEach(function(t){e(t)}),n.match(r)?(t.highlight=!0,a.push(t)):t.highlight=!1}var r=new RegExp(n),a=[];return e(t),a}function f(t){t.highlight=!1,t.children&&t.children.forEach(function(t){f(t)})}function h(t,n){return"function"==typeof j?j(t,n):j?d4.ascending(t.data.name,n.data.name):void 0}function s(){E.each(function(e){function r(t){return(t.x1-t.x0)*u}var a=d4.scaleLinear().range([0,v]),i=d4.scaleLinear().range([0,y]);j&&e.sort(h),e.sum(function(t){if(t.fade)return 0;var n=t.v||t.value||0;if(t.children)for(var e=0;e<t.children.length;e++)n-=t.children[e].value;return n}),H(e);var u=v/(e.x1-e.x0),c=d4.select(this).select("svg").selectAll("g").data(e.descendants());c.transition().duration(A).ease(O).attr("transform",function(t){return"translate("+a(t.x0)+","+(M?i(t.depth):x-i(t.depth)-y)+")"}),c.select("rect").transition().duration(A).ease(O).attr("width",r);var o=c.enter().append("svg:g").attr("transform",function(t){return"translate("+a(t.x0)+","+(M?i(t.depth):x-i(t.depth)-y)+")"});o.append("svg:rect").attr("width",r),w||o.append("svg:title"),o.append("foreignObject").append("xhtml:div"),c=d4.select(this).select("svg").selectAll("g").data(e.descendants()),c.attr("width",r).attr("height",function(t){return y}).attr("name",function(t){return t.data.name}).attr("class",function(t){return t.data.fade?"frame fade":"frame"}),c.select("rect").attr("height",function(t){return y}).attr("fill",function(t){return L(t)}),w||c.select("title").text(C),c.select("foreignObject").attr("width",r).attr("height",function(t){return y}).select("div").attr("class","label").style("display",function(t){return r(t)<35?"none":"block"}).text(n),c.on("click",l),c.exit().remove(),c.on("mouseover",function(n){w&&k.show(n),t(C(n))}).on("mouseout",function(n){w&&k.hide(n),t("")})})}function g(t,n){n.forEach(function(n){var e=t.find(function(t){return t.name===n.name});e?(e.original?e.original+=n.value:e.value+=n.value,n.children&&(e.children||(e.children=[]),g(e.children,n.children))):t.push(n)})}function p(t){var n=d4.hierarchy(t.datum(),function(t){return t.c||t.children});return E=t.datum(n),arguments.length?(x||(x=(n.height+2)*y),E.each(function(t){m||(m=d4.select(this).append("svg:svg").attr("width",v).attr("height",x).attr("class","partition d4-flame-graph").call(k),m.append("svg:text").attr("class","title").attr("text-anchor","middle").attr("y","25").attr("x",v/2).attr("fill","#808080").text(b))}),void s()):p}var m,v=960,x=null,y=18,E=null,w=!0,b="",A=750,O=d4.easeCubic,j=!0,M=!1,T=null,k=d4.tip().direction("s").offset([8,0]).attr("class","d4-flame-graph-tip").html(function(t){return C(t)}),C=function(t){return t.data.name+" ("+d4.format(".3f")(100*(t.x1-t.x0),3)+"%, "+t.data.value+" samples)"},L=function(t){return t.highlight?"#E600E6":r(t.data.name)},H=d4.partition();return p.height=function(t){return arguments.length?(x=t,p):x},p.width=function(t){return arguments.length?(v=t,p):v},p.cellHeight=function(t){return arguments.length?(y=t,p):y},p.tooltip=function(t){return arguments.length?("function"==typeof t&&(k=t),w=!!t,p):w},p.title=function(t){return arguments.length?(b=t,p):b},p.transitionDuration=function(t){return arguments.length?(A=t,p):A},p.transitionEase=function(t){return arguments.length?(O=t,p):O},p.sort=function(t){return arguments.length?(j=t,p):j},p.reversed=function(t){return arguments.length?(M=t,p):M},p.label=function(t){return arguments.length?(C=t,p):C},p.search=function(t){var n=[];return E.each(function(e){n=d(e,t),s()}),n},p.clear=function(){E.each(function(t){f(t),s()})},p.zoomTo=function(t){l(t)},p.resetZoom=function(){E.each(function(t){l(t)})},p.onClick=function(t){return arguments.length?(T=t,p):T},p.merge=function(t){var n;E.each(function(e){g([e.data],[t]),n=d4.hierarchy(e.data,function(t){return t.c||t.children})}),E=E.datum(n),s()},p.color=function(t){return arguments.length?(L=t,p):L},p}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),e=n.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],a=0;e>a;){var i=n[a];if(t.call(r,i,a,n))return i;a++}return void 0}}),"undefined"!=typeof module&&module.exports?module.exports=t:d4.flameGraph=t}();
